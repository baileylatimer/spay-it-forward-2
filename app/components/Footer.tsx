import { useEffect, useRef } from "react";
import { gsap } from "~/utils/gsap";

export default function Footer() {
  const footerRef = useRef<HTMLElement>(null);
  const contentRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            gsap.to(contentRef.current, {
              y: 0,
              opacity: 1,
              duration: 1,
              ease: "power3.out"
            });
            observer.disconnect();
          }
        });
      },
      { threshold: 0.2 }
    );

    if (footerRef.current) {
      observer.observe(footerRef.current);
    }

    return () => observer.disconnect();
  }, []);

  return (
    <footer ref={footerRef} className="card rounded-xl mx-2.5 md:mx-5 mb-2.5 md:mb-5 overflow-hidden">
      <div 
        ref={contentRef} 
        className="max-w-6xl mx-auto px-4 py-12 md:py-16 relative translate-y-20 opacity-0"
      >
        <div className="grid md:grid-cols-2 gap-8 items-center">
          <div>
            <h2 className="text-3xl md:text-4xl lg:text-5xl font-serif mb-8">
              Want to help?
            </h2>
            <button className="w-full md:w-auto bg-black text-white px-8 py-3 rounded-lg text-lg font-medium mb-4">
              Donate
            </button>
            <div className="mt-8">
              <a 
                href="mailto:contact@spayitforward.com" 
                className="text-lg hover:opacity-75 transition-opacity"
              >
                contact@spayitforward.com
              </a>
            </div>
          </div>

          <div className="flex justify-end">
            <svg className="w-[200px] md:w-[250px]" viewBox="0 0 402 203" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fillRule="evenodd" clipRule="evenodd" d="M252.775 16.0111C248.207 16.0111 245.162 12.7486 245.162 8.07238C245.162 3.72236 248.207 0.568604 252.775 0.568604C257.451 0.568604 260.496 3.72236 260.496 8.07238C260.496 12.7486 257.451 16.0111 252.775 16.0111ZM240.269 80.5001V79.0863C244.619 79.0863 247.881 77.0201 247.881 69.5163V37.2175C247.881 31.8887 245.706 30.1487 240.704 30.0399V28.6262C246.467 28.1912 252.992 26.9949 258.647 24.3849L259.626 24.9287V69.5163C259.626 77.0201 262.78 79.0863 267.239 79.0863V80.5001H240.269ZM288.81 81.5876C278.152 81.5876 273.149 73.6488 273.149 63.4263V29.7137H266.298V28.1912C274.998 27.3212 281.741 21.7749 283.481 11.8786H285.003V25.3637H301.207L299.358 29.7137H285.003V62.23C285.003 69.5163 288.266 74.7363 293.703 74.7363C298.38 74.7363 301.098 70.9301 301.968 66.9063L303.273 67.1238C302.295 74.9538 296.64 81.5876 288.81 81.5876ZM166.536 90.0701C167.297 96.8127 174.257 103.12 185.35 103.12C198.4 103.12 211.45 93.8764 211.45 74.4101V24.9287L210.471 24.3849C204.925 26.9949 198.4 28.1912 192.527 28.6262V30.0399C197.53 30.1487 199.705 31.8887 199.705 37.2175V62.0126C199.161 67.2326 195.898 73.4313 188.83 73.4313C181.108 73.4313 177.52 66.7976 177.52 57.2275V24.9287L176.541 24.3849C170.886 26.9949 164.361 28.1912 158.597 28.6262V30.0399C163.6 30.1487 165.775 31.8887 165.775 37.2175V58.4238C165.775 72.0176 173.387 80.1739 183.501 80.1739C192.527 80.1739 197.747 73.2138 199.705 67.2326V75.7151C199.705 93.4414 194.485 101.271 185.676 101.38C181.543 101.489 178.063 99.3139 177.411 95.3989C177.191 93.9698 177.416 92.7907 177.635 91.637C177.851 90.5081 178.061 89.4035 177.846 88.1126C177.411 84.9589 174.801 82.6751 171.43 83.0014C168.276 83.3276 165.883 86.1551 166.536 90.0701ZM152.132 81.3701C145.825 81.3701 142.562 76.9113 141.692 70.0601L141.366 67.6676C140.061 74.5188 133.536 81.5876 123.531 81.5876C114.287 81.5876 107.871 75.6063 107.871 67.5588C107.871 60.2725 113.091 55.0525 122.77 54.1825L139.3 52.8775L138.539 47.3313C137.234 37.435 132.775 30.9099 124.51 30.9099C118.094 30.9099 113.309 34.9337 110.916 40.6975L109.502 40.3712C111.569 32.65 119.399 24.2762 130.491 24.2762C141.475 24.2762 148.435 31.4537 150.066 44.395L153.22 68.4288C153.872 73.1051 155.721 74.5188 157.57 74.5188C159.092 74.5188 160.18 73.2138 160.506 71.3651L161.811 71.4738C161.594 76.1501 158.222 81.3701 152.132 81.3701ZM118.855 65.1663C118.855 70.3863 122.661 75.1713 129.295 75.1713C136.255 75.1713 140.496 70.1688 141.04 65.1663L139.517 54.5088L128.86 55.3788C122.226 56.0313 118.855 59.9463 118.855 65.1663ZM44.6327 100.836V102.25H68.85C61.6851 105.659 55.8197 112.569 52.4219 120.137C49.7031 126.336 46.7668 128.076 41.7643 128.62L41.4381 130.142H49.0506L39.4806 177.34C36.6531 191.26 30.8893 200.721 21.7543 201.265L21.6455 202.679C35.2393 202.135 48.1806 193.109 52.0956 173.642L60.9044 130.142H72.9757L75.6944 125.792H61.7744L62.3181 123.4C64.9281 110.785 70.9094 101.976 76.3469 101.976C78.7688 101.976 78.6012 103.382 78.3461 105.522C78.2919 105.976 78.2338 106.464 78.1957 106.978C77.6519 112.416 81.4582 114.917 85.3732 114.156C89.397 113.395 90.8107 109.153 89.397 106C88.2007 101.976 83.6332 99.9096 78.1957 100.018C76.2812 100.037 74.4134 100.32 72.6082 100.83C67.552 100.696 63.9902 98.5251 63.9902 91.2664V75.1713C67.144 78.7601 71.7115 81.5876 78.2365 81.5876C92.4828 81.5876 103.684 68.7551 103.684 52.5513C103.684 36.7825 94.3316 24.4937 81.499 24.4937C71.929 24.4937 65.7302 31.3449 63.9902 36.2387V24.9287L63.0115 24.3849C57.3565 26.9949 50.8314 28.1912 45.0677 28.6262V30.0399C50.0702 30.1487 52.2452 31.8887 52.2452 37.2175V91.2664C52.2452 98.7702 48.9827 100.836 44.6327 100.836ZM77.3665 79.5214C68.9928 79.5214 63.9902 70.1688 63.9902 58.5325V39.7187C65.7302 34.6075 69.6453 30.5837 75.409 30.5837C84.1091 30.5837 91.3953 39.61 91.3953 56.575C91.3953 70.3863 85.5228 79.5214 77.3665 79.5214ZM2.78504 81.8051L0.936279 58.8588L2.35003 58.5325C4.85129 66.0363 10.6151 79.6301 22.7951 79.7389C29.7551 79.7389 33.8876 75.6063 33.9964 70.3863C33.9964 65.0576 30.5164 61.9038 21.8163 58.8588L15.2913 56.2488C6.5913 52.9863 1.37128 48.0925 1.48003 39.8275C1.69753 30.9099 10.0713 24.2762 20.7288 24.3849C24.6461 24.427 27.7151 25.4154 30.1315 26.1936C33.954 27.4247 36.1438 28.1299 37.4764 23.7324L38.9989 23.6237L40.4127 44.9387L38.8901 45.1562C36.7151 37.6525 29.9726 26.1249 20.5113 26.0162C14.4213 25.9074 10.6151 30.0399 10.6151 34.9337C10.6151 39.8275 14.3126 43.1987 22.0338 45.9175L28.4501 48.5275C38.3464 52.225 43.1314 57.01 42.9139 64.7313C42.6964 75.6063 33.0176 81.5876 23.3389 81.4789C18.9088 81.3937 15.4632 80.3741 12.7471 79.5705C8.52882 78.3223 6.07014 77.5948 4.41629 81.6964L2.78504 81.8051ZM343.333 156.786C340.506 170.162 344.421 182.016 354.643 182.016C363.887 182.016 373.24 169.401 378.568 156.351L377.046 162.876C374.762 173.425 374.436 180.276 380.526 181.364C386.616 182.56 394.337 176.687 398.578 158.417L397.6 158.091C394.446 170.054 390.313 175.382 388.03 175.056C385.923 174.873 386.748 171.219 388.165 164.939C388.43 163.762 388.717 162.492 389.008 161.136L399.883 109.806L401.95 100.018L400.971 99.2571C394.228 103.498 388.573 104.368 382.266 104.803V106.217C386.942 106.326 388.573 108.283 387.268 114.7L384.658 128.076C382.701 126.336 379.656 124.922 375.958 124.922C361.277 124.922 347.248 138.516 343.333 156.786ZM360.081 175.491C354.208 175.491 350.837 167.117 356.057 150.479C361.168 134.71 369.76 126.771 375.741 126.771C381.07 126.771 382.701 133.187 380.743 143.41C377.263 160.81 367.041 175.491 360.081 175.491ZM313.12 139.93C314.534 133.513 312.903 131.556 308.118 131.447V130.033C314.534 129.598 320.189 128.837 326.932 124.596L327.91 125.357L325.844 135.145L320.407 160.81C326.605 139.93 332.804 126.118 341.178 124.813C345.31 124.161 348.79 126.771 349.334 130.36C349.769 133.731 348.029 137.863 343.788 138.625C340.525 139.168 338.133 136.885 337.372 134.927C336.719 133.405 335.74 132.317 333.783 133.622C330.629 135.471 323.234 151.675 316.056 180.929H304.203L313.12 139.93ZM247.964 156.786C245.137 170.162 249.052 182.016 259.274 182.016C268.409 182.016 277.653 169.51 283.091 156.569L281.459 162.985C278.958 173.425 278.414 180.276 284.504 181.472C290.594 182.56 298.316 176.687 302.666 158.526L301.578 158.2C298.533 170.054 294.292 175.382 292.008 175.056C289.972 174.968 290.747 171.563 292.103 165.605C292.412 164.246 292.752 162.753 293.096 161.136L301.034 124.596L299.947 123.726L291.682 129.272C288.746 126.662 285.374 124.922 280.589 124.922C265.908 124.922 251.879 138.516 247.964 156.786ZM264.712 175.491C258.948 175.491 255.686 167.117 260.906 150.479C265.908 134.71 274.608 126.771 280.481 126.771C285.809 126.771 287.658 133.078 285.809 143.083C282.547 159.505 271.781 175.491 264.712 175.491ZM175.062 182.016C166.47 182.016 162.99 175.491 166.035 160.266L170.168 139.821C171.364 133.405 169.624 132.317 165.057 131.991V130.686C171.473 130.033 177.237 128.402 183.218 124.705L184.088 125.357L177.889 157.982C175.497 170.924 177.563 174.947 181.587 174.947C188.873 174.947 200.292 157.221 205.512 128.728L206.056 125.792H217.039L211.602 156.677C209.644 167.552 212.689 174.947 220.084 174.947C228.023 174.947 237.919 164.181 240.747 151.022C243.248 139.168 239.659 133.405 231.829 136.123C227.479 137.537 223.673 134.927 223.782 130.795C223.673 127.315 226.066 124.596 230.416 124.705C238.354 124.813 246.402 132.752 242.813 149.5C239.007 167.77 225.196 182.016 213.016 182.016C203.228 182.016 197.464 174.621 200.074 159.94L201.923 149.5C195.289 169.51 184.74 182.016 175.062 182.016ZM123.539 131.447C128.325 131.556 129.956 133.513 128.542 139.93L119.624 180.929H131.478C138.656 151.675 146.051 135.471 149.205 133.622C151.162 132.317 152.141 133.405 152.793 134.927C153.555 136.885 155.947 139.168 159.21 138.625C163.451 137.863 165.191 133.731 164.756 130.36C164.212 126.771 160.732 124.161 156.6 124.813C148.226 126.118 142.027 139.93 135.828 160.81L141.266 135.145L143.332 125.357L142.353 124.596C135.611 128.837 129.956 129.598 123.539 130.033V131.447ZM86.3418 181.907C72.8567 181.907 64.1567 169.184 68.0717 151.675C72.0955 134.383 86.4505 124.596 99.1743 124.596C112.224 124.596 121.142 136.885 117.118 154.394C113.203 171.902 98.9568 181.907 86.3418 181.907ZM80.143 153.741C76.7717 171.032 80.143 180.385 87.538 180.167C94.2805 179.95 101.349 169.945 104.938 152.654C108.309 135.58 105.482 126.118 98.0868 126.336C90.9093 126.553 83.5143 136.993 80.143 153.741Z" fill="black"/>
            </svg>
          </div>
        </div>
      </div>
    </footer>
  );
}
